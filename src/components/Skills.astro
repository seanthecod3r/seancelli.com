---
import TechCard from "./TechCard.astro";
---

<div class="font-expertise font-medium px-10 pt-10 lg:pt-0">
  <div
    class="font-medium text-3xl md:text-4xl text-black dark:text-white font-main-font pb-4"
  >
    My <span class="text-text_primary dark:text-text_secondary">Skills</span>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <TechCard
      title="JavaScript"
      description="The language of the web"
      iconSrc="/images/tech/javascript.png"
      iconAlt="JavaScript logo"
    />

    <TechCard
      title="TypeScript"
      description="Type safe JavaScript"
      iconSrc="/images/tech/typescript.png"
      iconAlt="TypeScript logo"
    />

    <TechCard
      title="React"
      description="JavaScript library"
      iconSrc="/images/tech/react.png"
      iconAlt="React logo"
    />

    <TechCard
      title="Tailwind"
      description="Utility-first CSS framework"
      iconSrc="/images/tech/tailwind.png"
      iconAlt="Tailwind logo"
    />

    <TechCard
      title="Express"
      description="Node.js framework"
      iconSrc="/images/tech/express.png"
      iconAlt="Express logo"
    />

    <TechCard
      title="Node"
      description="JavaScript runtime"
      iconSrc="/images/tech/node.png"
      iconAlt="Node logo"
    />

    <TechCard
      title="Git"
      description="Version control"
      iconSrc="/images/tech/git.png"
      iconAlt="Git logo"
    />

    <TechCard
      title="Supabase"
      description="Lean cloud database"
      iconSrc="/images/tech/supabase.png"
      iconAlt="Supabase logo"
    />
  </div>
</div>

<style>
  .progress-bar {
    transition: width 2s ease-out;
  }
</style>

<script>
  function animateProgressBar(bar: any) {
    const width = bar.getAttribute("data-width");
    bar.style.width = width;
  }

  function handleIntersect(entries: any, observer: any) {
    entries.forEach((entry: any) => {
      if (entry.isIntersecting) {
        animateProgressBar(entry.target);
        observer.unobserve(entry.target);
      }
    });
  }

  const options = {
    threshold: 0.1,
  };

  const observer = new IntersectionObserver(handleIntersect, options);

  const progressBars = document.querySelectorAll(".progress-bar");
  progressBars.forEach((bar) => {
    observer.observe(bar);
  });
</script>
